{
  "openapi": "3.1.1",
  "info": { "title": "My WHOOP Proxy", "version": "2.0.3" },
  "servers": [{ "url": "https://whoop-proxy.onrender.com" }],
  "paths": {
    "/today/recovery": {
      "get": {
        "operationId": "getTodayRecovery",
        "description": "Latest recovery snapshot for today.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "records": {
                      "type": "array",
                      "items": { "type": "object", "additionalProperties": true }
                    },
                    "nextToken": { "type": ["string", "null"] }
                  },
                  "required": ["records"]
                }
              }
            }
          }
        }
      }
    },
    "/me/summary": {
      "get": {
        "operationId": "getSummary30d",
        "description": "30-day summary (can be large; prefer /list/* for GPT).",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "profile": { "type": "object", "additionalProperties": true },
                    "body": { "type": "object", "additionalProperties": true },
                    "cycles": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "records": {
                          "type": "array",
                          "items": { "type": "object", "additionalProperties": true }
                        },
                        "nextToken": { "type": ["string", "null"] }
                      },
                      "required": ["records"]
                    },
                    "recovery": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "records": {
                          "type": "array",
                          "items": { "type": "object", "additionalProperties": true }
                        },
                        "nextToken": { "type": ["string", "null"] }
                      },
                      "required": ["records"]
                    },
                    "sleep": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "records": {
                          "type": "array",
                          "items": { "type": "object", "additionalProperties": true }
                        },
                        "nextToken": { "type": ["string", "null"] }
                      },
                      "required": ["records"]
                    }
                  },
                  "required": ["profile", "body", "cycles", "recovery", "sleep"]
                }
              }
            }
          }
        }
      }
    },
    "/profile/basic": {
      "get": {
        "operationId": "getProfileBasic",
        "description": "User basic profile.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "properties": {
                    "userId": { "type": "string" },
                    "firstName": { "type": ["string", "null"] },
                    "lastName": { "type": ["string", "null"] },
                    "email": { "type": ["string", "null"], "format": "email" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/measurement/body": {
      "get": {
        "operationId": "getBodyMeasurement",
        "description": "User body measurements.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "properties": {
                    "height_cm": { "type": ["number", "null"] },
                    "weight_kg": { "type": ["number", "null"] },
                    "body_fat_pct": { "type": ["number", "null"] }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/list/recovery": {
      "get": {
        "operationId": "listRecovery",
        "description": "Paginated recovery records within a date range. Use nextToken to continue.",
        "parameters": [
          { "name": "start", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "end", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "limit", "in": "query", "required": false, "schema": { "type": "integer", "minimum": 1, "maximum": 200, "default": 50 } },
          { "name": "nextToken", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "trim", "in": "query", "required": false, "schema": { "type": "string", "enum": ["true", "false"], "default": "true" } }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "records": {
                      "type": "array",
                      "items": { "type": "object", "additionalProperties": true }
                    },
                    "nextToken": { "type": ["string", "null"] }
                  },
                  "required": ["records"]
                }
              }
            }
          }
        }
      }
    },
    "/list/sleep": {
      "get": {
        "operationId": "listSleep",
        "description": "Paginated sleep records within a date range. Use nextToken to continue.",
        "parameters": [
          { "name": "start", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "end", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "limit", "in": "query", "required": false, "schema": { "type": "integer", "minimum": 1, "maximum": 200, "default": 50 } },
          { "name": "nextToken", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "trim", "in": "query", "required": false, "schema": { "type": "string", "enum": ["true", "false"], "default": "true" } }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "records": {
                      "type": "array",
                      "items": { "type": "object", "additionalProperties": true }
                    },
                    "nextToken": { "type": ["string", "null"] }
                  },
                  "required": ["records"]
                }
              }
            }
          }
        }
      }
    },
    "/list/workout": {
      "get": {
        "operationId": "listWorkout",
        "description": "Paginated workout records within a date range. Use nextToken to continue.",
        "parameters": [
          { "name": "start", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "end", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "limit", "in": "query", "required": false, "schema": { "type": "integer", "minimum": 1, "maximum": 200, "default": 50 } },
          { "name": "nextToken", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "trim", "in": "query", "required": false, "schema": { "type": "string", "enum": ["true", "false"], "default": "true" } }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "records": {
                      "type": "array",
                      "items": { "type": "object", "additionalProperties": true }
                    },
                    "nextToken": { "type": ["string", "null"] }
                  },
                  "required": ["records"]
                }
              }
            }
          }
        }
      }
    },
    "/list/cycle": {
      "get": {
        "operationId": "listCycle",
        "description": "Paginated cycle records within a date range. Use nextToken to continue.",
        "parameters": [
          { "name": "start", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "end", "in": "query", "required": true, "schema": { "type": "string", "format": "date-time" } },
          { "name": "limit", "in": "query", "required": false, "schema": { "type": "integer", "minimum": 1, "maximum": 200, "default": 50 } },
          { "name": "nextToken", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "trim", "in": "query", "required": false, "schema": { "type": "string", "enum": ["true", "false"], "default": "true" } }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "records": {
                      "type": "array",
                      "items": { "type": "object", "additionalProperties": true }
                    },
                    "nextToken": { "type": ["string", "null"] }
                  },
                  "required": ["records"]
                }
              }
            }
          }
        }
      }
    }
  }
}
